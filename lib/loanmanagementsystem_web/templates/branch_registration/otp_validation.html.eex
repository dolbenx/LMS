<div class="container" >
    <div class="page-header">
        <div>
            <h2 class="main-content-title tx-24 mg-b-5" style="color:white"></h2>
        </div>
            <button href="#" class="btn ripple btn-primary btn-rounded" onclick="history.back(-1)" type="button">Back &nbsp; <i class="fe fe-corner-up-left"></i></button>
    </div>

    <div class="row justify-content-md-center">

        <div class="col-md-4 text-center">

            <div class="row">
            <div class="alert alert-success mb-0" role="alert">
                    One Time Pin(OTP) has been sent to your mobile line <b><%= @user_details.username %>. </b>
            </div>
            <div class="col-sm-12 mt-5 bgWhite" style="border-radius: 20px; ">
                <div class="title">
                Verify OTP
                </div>



                    <form action="<%= Routes.branch_registration_path(@conn, :validate_otp)%>" method="POST" class="mt-5">
                     <input type="hidden" name="_csrf_token" id="csrf" value="<%= Plug.CSRFProtection.get_csrf_token()%>">
                        <input class="otp" type="text" oninput='digitValidate(this)' onkeyup='tabChange(1)' maxlength=1 name="otp1">
                        <input class="otp" type="text" oninput='digitValidate(this)' onkeyup='tabChange(2)' maxlength=1 name="otp2">
                        <input class="otp" type="text" oninput='digitValidate(this)' onkeyup='tabChange(3)' maxlength=1 name="otp3">
                        <input class="otp" type="text" oninput='digitValidate(this)'onkeyup='tabChange(4)' maxlength=1 name="otp4">
                        <input type="hidden" name="username" value="<%= @user_details.username %>" >
                        <input type="hidden" name="user_role" value="<%= @user_details.roleType %>" >
                        <input type="hidden" name="roleType" value="<%= @user_details.role_id %>" >





                    <hr class="mt-4">
                    <div class="modal-footer justify-content-center" >
                        <button href="#" class="btn ripple btn-primary btn-rounded" type="submit">Verify &nbsp; <i class="fe fe-check-circle"></i></button>
                    </div>
                </form>
            </div>
            </div>
        </div>
    </div>
</div>




<script>
    let digitValidate = function(ele){
    console.log(ele.value);
    ele.value = ele.value.replace(/[^0-9]/g,'');
    }

    let tabChange = function(val){
        let ele = document.querySelectorAll('input');
        if(ele[val-1].value != ''){
        ele[val].focus()
        }else if(ele[val-1].value == ''){
        ele[val-2].focus()
        }
    }


</script>
