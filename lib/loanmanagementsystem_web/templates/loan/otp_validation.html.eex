

<html>

	<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" />


		<style>
			.height-100 {
				height: 200vh
			}

			.card {
				width: 1000px;
				border: none;
				height: 500px;
				box-shadow: 0px 5px 20px 0px #1E1E2D;
				z-index: 1;
				display: flex;
				justify-content: center;
				align-items: center
			}

			.card h6 {
				color: #1E1E2D;
				font-size: 40px
			}

			.card small {
				color: black;
				font-size: 20px
			}

			.inputs input {
				width: 80px;
				height: 60px
			}

			input[type=number]::-webkit-inner-spin-button,
			input[type=number]::-webkit-outer-spin-button {
				-webkit-appearance: none;
				-moz-appearance: none;
				appearance: none;
				margin: 0
			}

			.card-2 {
				background-color: #1E1E2D;
				padding: 10px;
				width: 350px;
				height: 100px;
				bottom: -20px;
				left: 20px;
				position: absolute;
				border-radius: 5px
			}

			.card-2 .content {
				margin-top: 50px
			}

			.card-2 .content a {
				color: #1E1E2D
			}

			.form-control:focus {
				box-shadow: none;
				border: 2px solid #1E1E2D
			}

			.validate {
				border-radius: 20px;
				height: 60px;
				background-color: #1E1E2D;
				color: white;
				border: 1px solid #1E1E2D;
				width: 160px
			}
				.row_alert {
			display: flex;
			justify-content: center;
			}
		</style>
	</head>

	<body>

		<div class="row row_alert">
			<div class="col-md-6" style="padding-top: 10px;">
				<div class="form-group">
					<%= if get_flash(@conn, :info) do %>
					<div class="alert alert-success  alert-styled-center row_alert" style="border-radius:15px;" role="alert">
					<button type="button" class="close" data-dismiss="alert">&times; <span class="sr-only">Close</span></button>
					<%= get_flash(@conn, :info) %>
					</div>
					<% end %>
					<%= if get_flash(@conn, :error) do %>
					<div class="alert alert-danger alert-styled-center row_alert" style="border-radius:15px;">
					<button type="button" class="close" data-dismiss="alert">&times; <span class="sr-only">Close</span></button>
					Sorry! <%= get_flash(@conn, :error) %>
					</div>
					<% end %>
				</div>
			</div>
		</div>


        <!-- End Page Header -->
        <div class="container height-50 d-flex justify-content-md-center align-items-center">
			<form action="<%= Routes.loan_path(@conn, :validate_otp)%>" method="post">
			 <input type="hidden" name="_csrf_token" id="csrf" value="<%= Plug.CSRFProtection.get_csrf_token()%>">
				<div class="position-relative">
				<div class="card p-2 text-center">
					<input type="hidden" name="client_line" id="client_line" value="<%= @client_line %>">
					<input type="hidden" name="product_id" id="product_id" value="<%= @product_id %>">
					<input type="hidden" name="nrc" id="nrc" value="<%= @nrc %>">

					<h6>Please enter the one time pin <br> to verify your loan application</h6>
					<div>
					<small>A code has been sent to Your Mobile Number Provided</small>
					</div>
						<div id="otp" class="inputs d-flex flex-row justify-content-center mt-2">
							<input class="m-2 text-center form-control rounded" type="text" name="otp1" id="first" maxlength="1" />
							<input class="m-2 text-center form-control rounded" type="text" name="otp2" id="second" maxlength="1" />
							<input class="m-2 text-center form-control rounded" type="text" name="otp3" id="third" maxlength="1" />
							<input class="m-2 text-center form-control rounded" type="text" name="otp4" id="fourth" maxlength="1" />
						</div>
					<div class="mt-4">
					<a href="<%= Routes.loan_path(@conn, :resend_otp, client_line: @client_line, product_id: @product_id, nrc: @nrc) %>" class="btn btn-secondary font-weight-bold btn-pill font-size-h6 px-10 py-4 mr-2"><i class="flaticon2-refresh-button"></i>Resend OTP</a> <button class="btn btn-success font-weight-bold btn-pill font-size-h6 px-10 py-4 mr-2"><i class="flaticon2-check-mark"></i>Validate</button>


					</div>
				</div>
				</div>
			</form>
		</div>

		<script>
			document.addEventListener("DOMContentLoaded", function(event) {
				function OTPInput() {
					const inputs = document.querySelectorAll('#otp > *[id]');
					for(let i = 0; i < inputs.length; i++) {
						inputs[i].addEventListener('keydown', function(event) {
							if(event.key === "Backspace") {
								inputs[i].value = '';
								if(i !== 0) inputs[i - 1].focus();
							} else {
								if(i === inputs.length - 1 && inputs[i].value !== '') {
									return true;
								} else if(event.keyCode > 47 && event.keyCode < 58) {
									inputs[i].value = event.key;
									if(i !== inputs.length - 1) inputs[i + 1].focus();
									event.preventDefault();
								} else if(event.keyCode > 64 && event.keyCode < 91) {
									inputs[i].value = String.fromCharCode(event.keyCode);
									if(i !== inputs.length - 1) inputs[i + 1].focus();
									event.preventDefault();
								}
							}
						});
					}
				}
				OTPInput();
			});
		</script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/js/bootstrap.min.js"></script>

		<script>

	</body>
</html>
